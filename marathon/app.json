{
  "id": "/app",
  "apps": [
    {
      "id": "mamangcontrol",
      "cmd": "/usr/local/bin/gunicorn mama_ng_control.wsgi:application -w 2 -b :8000",
      "instances": 1,
      "cpus": 0.1,
      "mem": 128,
      "container": {
        "type": "DOCKER",
        "docker": {
          "image": "mama-ng-control",
          "network": "BRIDGE",
          "portMappings": [
            {
              "containerPort": 8000
            }
          ]
        }
      },
      "env": {
        "VIRTUAL_HOST": "mama-ng-control.local",
        "SECRET_KEY": "5(15ds+i2+%ik6z&!yer+ga9m=e%jcqiz_5wszg)r-z!2--b2d",
        "MAMA_NG_CONTROL_DB_NAME": "postgres",
        "MAMA_NG_CONTROL_DB_USER": "postgres",
        "MAMA_NG_CONTROL_DB_PASS": "postgres",
        "MAMA_NG_CONTROL_DB_SERVICE": "postgresql.service.consul",
        "MAMA_NG_CONTROL_DB_PORT": "5432",
        "MAMA_NG_CONTROL_REDIS_SERVICE": "redis.service.consul",
        "MAMA_NG_CONTROL_REDIS_PORT": "6379",
        "MAMA_NG_CONTROL_URL": "http://servicehost/mamangcontrol/api/v1",
        "MAMA_NG_CONTROL_VUMI_API_URL": "servicehost/mamangvumi",
        "MAMA_NG_CONTROL_VUMI_ACCOUNT_KEY": "replace-me",
        "MAMA_NG_CONTROL_VUMI_CONVERSATION_KEY": "replace-me",
        "MAMA_NG_CONTROL_VUMI_ACCOUNT_TOKEN": "replace-me",
        "MAMA_NG_CONTROL_MAX_RETRIES": "3",
        "MAMA_NG_CONTROL_MAX_FAILURES": "5",
        "MAMA_NG_CONTROL_CONTENTSTORE_AUTH_TOKEN": "replace-me",
        "MAMA_NG_CONTROL_CONTENTSTORE_API_URL": "servicehost/mamangcontentstore",
        "MAMA_NG_CONTROL_SCHEDULER_URL": "http://servicehost/mamangscheduler/mama-ng-scheduler/rest/",
        "MAMA_NG_CONTROL_SCHEDULER_USERNAME": "sc-username",
        "MAMA_NG_CONTROL_SCHEDULER_PASSWORD": "sc-password"
      },
      "parameters": [
        {
          "key": "add-host",
          "value": "servicehost:172.17.0.1"
        }
      ],
      "labels": {
        "location": "/mamangcontrol/api/v1",
        "internal": "true",
        "domain": "mamangcontrol.127.0.0.1.xip.io"
      }
    },
    {
      "id": "mamangcontrolcelery",
      "cmd": "/usr/local/bin/python manage.py celery worker --loglevel=info",
      "instances": 1,
      "cpus": 0.1,
      "mem": 128,
      "container": {
        "type": "DOCKER",
        "docker": {
          "image": "mama-ng-control"
        }
      },
      "env": {
        "VIRTUAL_HOST": "mama-ng-control.local",
        "SECRET_KEY": "5(15ds+i2+%ik6z&!yer+ga9m=e%jcqiz_5wszg)r-z!2--b2d",
        "MAMA_NG_CONTROL_DB_NAME": "postgres",
        "MAMA_NG_CONTROL_DB_USER": "postgres",
        "MAMA_NG_CONTROL_DB_PASS": "postgres",
        "MAMA_NG_CONTROL_DB_SERVICE": "postgresql.service.consul",
        "MAMA_NG_CONTROL_DB_PORT": "5432",
        "MAMA_NG_CONTROL_REDIS_SERVICE": "redis.service.consul",
        "MAMA_NG_CONTROL_REDIS_PORT": "6379",
        "MAMA_NG_CONTROL_URL": "http://servicehost/mamangcontrol/api/v1",
        "MAMA_NG_CONTROL_VUMI_API_URL": "servicehost/mamangvumi",
        "MAMA_NG_CONTROL_VUMI_ACCOUNT_KEY": "replace-me",
        "MAMA_NG_CONTROL_VUMI_CONVERSATION_KEY": "replace-me",
        "MAMA_NG_CONTROL_VUMI_ACCOUNT_TOKEN": "replace-me",
        "MAMA_NG_CONTROL_MAX_RETRIES": "3",
        "MAMA_NG_CONTROL_MAX_FAILURES": "5",
        "MAMA_NG_CONTROL_CONTENTSTORE_AUTH_TOKEN": "replace-me",
        "MAMA_NG_CONTROL_CONTENTSTORE_API_URL": "servicehost/mamangcontentstore",
        "MAMA_NG_CONTROL_SCHEDULER_URL": "http://servicehost/mamangscheduler/mama-ng-scheduler/rest/",
        "MAMA_NG_CONTROL_SCHEDULER_USERNAME": "sc-username",
        "MAMA_NG_CONTROL_SCHEDULER_PASSWORD": "sc-password"
      },
      "parameters": [
        {
          "key": "add-host",
          "value": "servicehost:172.17.0.1"
        }
      ]
    },
    {
      "id": "mamangcontrolcelerybeat",
      "cmd": "/usr/local/bin/python manage.py celery beat --loglevel=info",
      "instances": 1,
      "cpus": 0.1,
      "mem": 128,
      "container": {
        "type": "DOCKER",
        "docker": {
          "image": "mama-ng-control"
        }
      },
      "env": {
        "VIRTUAL_HOST": "mama-ng-control.local",
        "SECRET_KEY": "5(15ds+i2+%ik6z&!yer+ga9m=e%jcqiz_5wszg)r-z!2--b2d",
        "MAMA_NG_CONTROL_DB_NAME": "postgres",
        "MAMA_NG_CONTROL_DB_USER": "postgres",
        "MAMA_NG_CONTROL_DB_PASS": "postgres",
        "MAMA_NG_CONTROL_DB_SERVICE": "postgresql.service.consul",
        "MAMA_NG_CONTROL_DB_PORT": "5432",
        "MAMA_NG_CONTROL_REDIS_SERVICE": "redis.service.consul",
        "MAMA_NG_CONTROL_REDIS_PORT": "6379",
        "MAMA_NG_CONTROL_URL": "http://servicehost/mamangcontrol/api/v1",
        "MAMA_NG_CONTROL_VUMI_API_URL": "servicehost/mamangvumi",
        "MAMA_NG_CONTROL_VUMI_ACCOUNT_KEY": "replace-me",
        "MAMA_NG_CONTROL_VUMI_CONVERSATION_KEY": "replace-me",
        "MAMA_NG_CONTROL_VUMI_ACCOUNT_TOKEN": "replace-me",
        "MAMA_NG_CONTROL_MAX_RETRIES": "3",
        "MAMA_NG_CONTROL_MAX_FAILURES": "5",
        "MAMA_NG_CONTROL_CONTENTSTORE_AUTH_TOKEN": "replace-me",
        "MAMA_NG_CONTROL_CONTENTSTORE_API_URL": "servicehost/mamangcontentstore",
        "MAMA_NG_CONTROL_SCHEDULER_URL": "http://servicehost/mamangscheduler/mama-ng-scheduler/rest/",
        "MAMA_NG_CONTROL_SCHEDULER_USERNAME": "sc-username",
        "MAMA_NG_CONTROL_SCHEDULER_PASSWORD": "sc-password"
      },
      "parameters": [
        {
          "key": "add-host",
          "value": "servicehost:172.17.0.1"
        }
      ]
    },
    {
      "id": "mamangcontentstore",
      "cmd": "/usr/local/bin/gunicorn mama_ng_contentstore.wsgi:application -w 2 -b :8001",
      "instances": 1,
      "cpus": 0.1,
      "mem": 128,
      "container": {
        "type": "DOCKER",
        "docker": {
          "image": "mama-ng-contentstore"
        },
        "network": "BRIDGE",
        "portMappings": [
          {
            "containerPort": 8001
          }
        ]
      },
      "env": {
        "VIRTUAL_HOST": "mama-ng-contentstore.local",
        "SECRET_KEY": "6(16ds+i2+%ik6z&!yer+ga9m=e%jcqiz_5wszg)r-z!2--b1d",
        "MAMA_NG_CONTENTSTORE_DB_NAME": "postgres",
        "MAMA_NG_CONTENTSTORE_DB_USER": "postgres",
        "MAMA_NG_CONTENTSTORE_DB_PASS": "postgres",
        "MAMA_NG_CONTENTSTORE_DB_SERVICE": "postgresql.service.consul",
        "MAMA_NG_CONTENTSTORE_DB_PORT": "5432",
        "DEBUG": "True"
      },
      "parameters": [
        {
          "key": "add-host",
          "value": "servicehost:172.17.0.1"
        }
      ],
      "labels": {
        "location": "/mamangcontentstore",
        "internal": "true",
        "domain": "mamangcontentstore.127.0.0.1.xip.io"
      }
    },
    {
      "id": "mamangscheduler",
      "instances": 1,
      "cpus": 0.1,
      "mem": 128,
      "container": {
        "type": "DOCKER",
        "docker": {
          "image": "mama-ng-scheduler"
        },
        "network": "BRIDGE",
        "portMappings": [
          {
            "containerPort": 8090
          }
        ]
      },
      "env": {
        "VIRTUAL_HOST": "mama-ng-scheduler.local",
        "DATABASE_URL": "postgresql://postgres:postgres@postgresql.service.consul:5432/postgres"
      },
      "parameters": [
        {
          "key": "add-host",
          "value": "servicehost:172.17.0.1"
        }
      ],
      "labels": {
        "location": "/mamangscheduler/mama-ng-scheduler/rest/",
        "internal": "true",
        "domain": "mamangscheduler.127.0.0.1.xip.io"
      }
    }
  ]
}
